<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Заучивание джуза Амма | Эффективная методика</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #2c5e48;
            --secondary: #d4af37;
            --light: #f8f9fa;
            --dark: #343a40;
            --accent: #8e44ad;
            --success: #28a745;
            --danger: #dc3545;
            --info: #17a2b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f5f5;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), #1e3c30);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            font-family: 'Scheherazade New', serif;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: var(--dark);
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-info {
            background-color: var(--info);
            color: white;
        }
        
        .features {
            padding: 4rem 0;
            background-color: white;
        }
        
        .section-title {
            text-align: center;
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 3rem;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .feature-card {
            background-color: var(--light);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .feature-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .quran-section {
            padding: 4rem 0;
            background: linear-gradient(rgba(44, 94, 72, 0.9), rgba(44, 94, 72, 0.9)), url('https://images.unsplash.com/photo-1564121211835-e88c852648ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
            color: white;
            text-align: center;
        }
        
        .surah-selector {
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .surah-btn {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .surah-btn:hover, .surah-btn.active {
            background-color: var(--secondary);
            color: var(--dark);
            border-color: var(--secondary);
        }
        
        .verse-display {
            margin-top: 3rem;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 2rem;
            border-radius: 10px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .verse-arabic {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            direction: rtl;
        }
        
        .verse-translation {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }
        
        .verse-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .reciters {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .reciter-btn {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.3rem 0.7rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .reciter-btn:hover, .reciter-btn.active {
            background-color: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .methodology {
            padding: 4rem 0;
            background-color: var(--light);
        }
        
        .steps {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .step {
            display: flex;
            margin-bottom: 2rem;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .step-number {
            background-color: var(--primary);
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 60px;
        }
        
        .step-content {
            padding: 1.5rem;
        }
        
        .step-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .install-guide {
            padding: 4rem 0;
            background-color: white;
        }
        
        .guide-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--light);
            padding: 2rem;
            border-radius: 10px;
        }
        
        .guide-step {
            margin-bottom: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .guide-icon {
            font-size: 1.5rem;
            color: var(--primary);
            margin-top: 0.3rem;
        }
        
        .progress-section {
            padding: 4rem 0;
            background-color: white;
        }
        
        .progress-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #e9ecef;
            border-radius: 10px;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--success);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .surah-progress {
            margin-bottom: 2rem;
        }
        
        .surah-progress h3 {
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .test-section {
            padding: 4rem 0;
            background-color: var(--light);
            display: none;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .test-question {
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }
        
        .test-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .test-option {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .test-option:hover {
            background-color: #f8f9fa;
        }
        
        .test-option.selected {
            background-color: var(--info);
            color: white;
            border-color: var(--info);
        }
        
        .test-option.correct {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .test-option.incorrect {
            background-color: var(--danger);
            color: white;
            border-color: var(--danger);
        }
        
        .test-result {
            text-align: center;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: none;
        }
        
        .bookmarks-section {
            padding: 4rem 0;
            background-color: white;
            display: none;
        }
        
        .bookmarks-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .bookmark-item {
            background-color: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .bookmark-item h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .empty-message {
            text-align: center;
            color: #6c757d;
            padding: 2rem;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 3rem 0;
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: white;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-link:hover {
            color: var(--secondary);
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .social-icon {
            color: white;
            font-size: 1.5rem;
            transition: color 0.3s ease;
        }
        
        .social-icon:hover {
            color: var(--secondary);
        }
        
        .tab-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background-color: white;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .tab-btn {
            padding: 0.7rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
            transition: all 0.3s ease;
            border-radius: 5px;
        }
        
        .tab-btn:hover {
            background-color: #f8f9fa;
        }
        
        .tab-btn.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .verse-arabic {
                font-size: 1.5rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .verse-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .tab-nav {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1 dir="rtl">جزء عمّ</h1>
            <p class="subtitle">Лучшая методика для заучивания 30-го джуза Корана</p>
            <a href="#start" class="btn btn-primary">Начать обучение</a>
        </div>
    </header>
    
    <div class="tab-nav">
        <button class="tab-btn active" onclick="openTab('learn')">Учить</button>
        <button class="tab-btn" onclick="openTab('progress')">Прогресс</button>
        <button class="tab-btn" onclick="openTab('test')">Тест</button>
        <button class="tab-btn" onclick="openTab('bookmarks')">Закладки</button>
        <button class="tab-btn" onclick="openTab('methodology')">Методика</button>
        <button class="tab-btn" onclick="openTab('install')">Установка</button>
    </div>
    
    <section class="tab-content active" id="learn-tab">
        <div class="quran-section" id="start">
            <div class="container">
                <h2 class="section-title" style="color: white;">Джуз Амма</h2>
                <p>Выберите суру для начала запоминания</p>
                
                <div class="surah-selector">
                    <button class="surah-btn active" onclick="loadSurah('Ан-Наба')">Ан-Наба</button>
                    <button class="surah-btn" onclick="loadSurah('Ан-Назиат')">Ан-Назиат</button>
                    <button class="surah-btn" onclick="loadSurah('Абаса')">Абаса</button>
                    <button class="surah-btn" onclick="loadSurah('Ат-Таквир')">Ат-Таквир</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Инфитар')">Аль-Инфитар</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Мутаффифин')">Аль-Мутаффифин</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Иншикак')">Аль-Иншикак</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Бурудж')">Аль-Бурудж</button>
                    <button class="surah-btn" onclick="loadSurah('Ат-Тарик')">Ат-Тарик</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Аля')">Аль-Аля</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Гашия')">Аль-Гашия</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Фаджр')">Аль-Фаджр</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Баляд')">Аль-Баляд</button>
                    <button class="surah-btn" onclick="loadSurah('Аш-Шамс')">Аш-Шамс</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Лейл')">Аль-Лейл</button>
                    <button class="surah-btn" onclick="loadSurah('Ад-Духа')">Ад-Духа</button>
                    <button class="surah-btn" onclick="loadSurah('Аш-Шарх')">Аш-Шарх</button>
                    <button class="surah-btn" onclick="loadSurah('Ат-Тин')">Ат-Тин</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Аляк')">Аль-Аляк</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Кадр')">Аль-Кадр</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Баййина')">Аль-Баййина</button>
                    <button class="surah-btn" onclick="loadSurah('Аз-Зальзаля')">Аз-Зальзаля</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Адият')">Аль-Адият</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Кариа')">Аль-Кариа</button>
                    <button class="surah-btn" onclick="loadSurah('Ат-Такасур')">Ат-Такасур</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Аср')">Аль-Аср</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Хумаза')">Аль-Хумаза</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Филь')">Аль-Филь</button>
                    <button class="surah-btn" onclick="loadSurah('Курайш')">Курайш</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Маун')">Аль-Маун</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Каусар')">Аль-Каусар</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Кафирун')">Аль-Кафирун</button>
                    <button class="surah-btn" onclick="loadSurah('Ан-Наср')">Ан-Наср</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Масад')">Аль-Масад</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Ихляс')">Аль-Ихляс</button>
                    <button class="surah-btn" onclick="loadSurah('Аль-Фаляк')">Аль-Фаляк</button>
                    <button class="surah-btn" onclick="loadSurah('Ан-Нас')">Ан-Нас</button>
                </div>
                
                <div class="verse-display" id="verse-display">
                    <!-- Сюда загружаются аяты -->
                </div>
            </div>
        </div>
    </section>
    
    <section class="tab-content" id="progress-tab">
        <div class="progress-section">
            <div class="container">
                <h2 class="section-title">Ваш прогресс</h2>
                <div class="progress-container" id="progress-container">
                    <!-- Сюда загружается прогресс -->
                </div>
            </div>
        </div>
    </section>
    
    <section class="tab-content" id="test-tab">
        <div class="test-section">
            <div class="container">
                <h2 class="section-title">Проверка знаний</h2>
                <div class="test-container" id="test-container">
                    <div class="test-question" id="test-question"></div>
                    <div class="test-options" id="test-options"></div>
                    <button class="btn btn-primary" id="next-test-btn" style="display: none;">Следующий вопрос</button>
                    <div class="test-result" id="test-result"></div>
                    <button class="btn btn-success" id="start-test-btn">Начать тест</button>
                </div>
            </div>
        </div>
    </section>
    
    <section class="tab-content" id="bookmarks-tab">
        <div class="bookmarks-section">
            <div class="container">
                <h2 class="section-title">Ваши закладки</h2>
                <div class="bookmarks-container" id="bookmarks-container">
                    <!-- Сюда загружаются закладки -->
                </div>
            </div>
        </div>
    </section>
    
    <section class="tab-content" id="methodology-tab">
        <div class="methodology">
            <div class="container">
                <h2 class="section-title">Методика запоминания</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3 class="step-title">Активное слушание</h3>
                            <p>Прослушайте аят 3-5 раз от чтеца, которого вам легко повторять. Обращайте внимание на произношение и интонацию.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3 class="step-title">Фрагментарное повторение</h3>
                            <p>Разбейте аят на части по 3-5 слов и повторяйте каждую часть по 3 раза, затем соединяйте части вместе.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3 class="step-title">Интервальные повторения</h3>
                            <p>Повторите аят через 10 минут, затем через 1 час, через 6 часов и на следующий день. Система будет напоминать вам о повторениях.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3 class="step-title">Контекстное запоминание</h3>
                            <p>Свяжите аят с предыдущими и следующими аятами, а также с его смысловым значением для лучшего запоминания.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h3 class="step-title">Проверка знаний</h3>
                            <p>Регулярно проходите тесты, чтобы закрепить выученные аяты и выявить слабые места.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="tab-content" id="install-tab">
        <div class="install-guide">
            <div class="container">
                <h2 class="section-title">Как установить на iPhone</h2>
                <div class="guide-container">
                    <div class="guide-step">
                        <div class="guide-icon"><i class="fas fa-mobile-alt"></i></div>
                        <div>
                            <h3>1. Откройте сайт в Safari</h3>
                            <p>Перейдите на этот сайт с помощью браузера Safari на вашем iPhone.</p>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-icon"><i class="fas fa-share-square"></i></div>
                        <div>
                            <h3>2. Нажмите кнопку "Поделиться"</h3>
                            <p>В нижней панели Safari найдите и нажмите кнопку "Поделиться" (иконка квадрата со стрелкой вверх).</p>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-icon"><i class="fas fa-plus-circle"></i></div>
                        <div>
                            <h3>3. Выберите "На экран Домой"</h3>
                            <p>Прокрутите меню вниз и выберите опцию "На экран Домой".</p>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <h3>4. Добавьте приложение</h3>
                            <p>Назовите приложение (например, "Джуз Амма") и нажмите "Добавить". Теперь оно будет доступно с вашего домашнего экрана как полноценное приложение.</p>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-icon"><i class="fas fa-rocket"></i></div>
                        <div>
                            <h3>5. Начните использовать</h3>
                            <p>Открывайте приложение с домашнего экрана - оно будет работать в полноэкранном режиме без адресной строки браузера.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="#" class="footer-link">О проекте</a>
                <a href="#" class="footer-link">Частые вопросы</a>
                <a href="#" class="footer-link">Контакты</a>
            </div>
            <div class="social-icons">
                <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-telegram"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
            </div>
            <p>&copy; 2023 Платформа для заучивания джуза Амма. Все права защищены.</p>
        </div>
    </footer>
    
    <script>
        // Все суры джуза Амма с хариятами и переводами
        const juzAmma = {
            "Ан-Наба": {
                verses: [
                    "عَمَّ يَتَسَاءَلُونَ ﴿١﴾ عَنِ النَّبَإِ الْعَظِيمِ ﴿٢﴾ الَّذِي هُمْ فِيهِ مُخْتَلِفُونَ ﴿٣﴾",
                    "كَلَّا سَيَعْلَمُونَ ﴿٤﴾ ثُمَّ كَلَّا سَيَعْلَمُونَ ﴿٥﴾",
                    "أَلَمْ نَجْعَلِ الْأَرْضَ مِهَادًا ﴿٦﴾ وَالْجِبَالَ أَوْتَادًا ﴿٧﴾",
                    "وَخَلَقْنَاكُمْ أَزْوَاجًا ﴿٨﴾ وَجَعَلْنَا نَوْمَكُمْ سُبَاتًا ﴿٩﴾",
                    "وَجَعَلْنَا اللَّيْلَ لِبَاسًا ﴿١٠﴾ وَجَعَلْنَا النَّهَارَ مَعَاشًا ﴿١١﴾",
                    "وَبَنَيْنَا فَوْقَكُمْ سَبْعًا شِدَادًا ﴿١٢﴾ وَجَعَلْنَا سِرَاجًا وَهَّاجًا ﴿١٣﴾",
                    "وَأَنزَلْنَا مِنَ الْمُعْصِرَاتِ مَاءً ثَجَّاجًا ﴿١٤﴾ لِنُخْرِجَ بِهِ حَبًّا وَنَبَاتًا ﴿١٥﴾",
                    "وَجَنَّاتٍ أَلْفَافًا ﴿١٦﴾ إِنَّ يَوْمَ الْفَصْلِ كَانَ مِيقَاتًا ﴿١٧﴾"
                ],
                translations: [
                    "О чем они расспрашивают друг друга? О Великом известии, относительно которого они расходятся во мнениях",
                    "Но нет! Скоро они узнают. Еще раз нет! Скоро они узнают",
                    "Разве Мы не сделали землю ложем, а горы - колышками?",
                    "Мы создали вас парами и сделали ваш сон отдыхом",
                    "Мы сделали ночь покровом, а день - временем для жизненных дел",
                    "Мы воздвигли над вами семь прочных небес и установили пылающий светильник",
                    "Мы пролили из дождевых туч обильные ливни, чтобы взрастить благодаря им зерна и растения",
                    "И густые сады. Воистину, День Различения - это срок, назначенный для всех"
                ],
                audio: {
                    "Мишари Рашид": "https://server.mp3quran.net/mish_r/078.mp3",
                    "Сауд аш-Шураим": "https://server.mp3quran.net/shs/078.mp3",
                    "Махир аль-Муайкли": "https://server.mp3quran.net/maher/078.mp3"
                }
            },
            "Ан-Назиат": {
                verses: [
                    "وَالنَّازِعَاتِ غَرْقًا ﴿١﴾ وَالنَّاشِطَاتِ نَشْطًا ﴿٢﴾ وَالسَّابِحَاتِ سَبْحًا ﴿٣﴾",
                    "فَالسَّابِقَاتِ سَبْقًا ﴿٤﴾ فَالْمُدَبِّرَاتِ أَمْرًا ﴿٥﴾",
                    "يَوْمَ تَرْجُفُ الرَّاجِفَةُ ﴿٦﴾ تَتْبَعُهَا الرَّادِفَةُ ﴿٧﴾",
                    "قُلُوبٌ يَوْمَئِذٍ وَاجِفَةٌ ﴿٨﴾ أَبْصَارُهَا خَاشِعَةٌ ﴿٩﴾"
                ],
                translations: [
                    "Клянусь вырывающими с силой, клянусь извлекающими легко, клянусь плывущими стремительно",
                    "Клянусь опережающими быстро, клянусь исполняющими повеления",
                    "В тот день, когда сотрясется сотрясающее, за которым последует следующее",
                    "Сердца в тот день будут трепетать, а взоры будут смиренно опущены"
                ],
                audio: {
                    "Мишари Рашид": "https://server.mp3quran.net/mish_r/079.mp3",
                    "Сауд аш-Шураим": "https://server.mp3quran.net/shs/079.mp3",
                    "Махир аль-Муайкли": "https://server.mp3quran.net/maher/079.mp3"
                }
            },
            // Добавьте остальные суры по аналогии
            "Ан-Нас": {
                verses: [
                    "قُلْ أَعُوذُ بِرَبِّ النَّاسِ ﴿١﴾ مَلِكِ النَّاسِ ﴿٢﴾ إِلَـٰهِ النَّاسِ ﴿٣﴾",
                    "مِن شَرِّ الْوَسْوَاسِ الْخَنَّاسِ ﴿٤﴾ الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ ﴿٥﴾ مِنَ الْجِنَّةِ وَالنَّاسِ ﴿٦﴾"
                ],
                translations: [
                    "Скажи: «Прибегаю к защите Господа людей, Царя людей, Бога людей",
                    "от зла искусителя отступающего при поминании Аллаха, который наущает в груди людей, и бывает он из джиннов и людей»"
                ],
                audio: {
                    "Мишари Рашид": "https://server.mp3quran.net/mish_r/114.mp3",
                    "Сауд аш-Шураим": "https://server.mp3quran.net/shs/114.mp3",
                    "Махир аль-Муайкли": "https://server.mp3quran.net/maher/114.mp3"
                }
            }
        };

        // Текущее состояние
        let currentSurah = "Ан-Наба";
        let currentVerse = 0;
        let currentReciter = "Мишари Рашид";
        let testQuestions = [];
        let currentTestQuestion = 0;
        let testScore = 0;

        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            loadSurah(currentSurah);
            loadProgress();
            loadBookmarks();
            
            // Инициализация теста
            document.getElementById('start-test-btn').addEventListener('click', startTest);
            document.getElementById('next-test-btn').addEventListener('click', nextTestQuestion);
        });

        // Загрузка суры
        function loadSurah(surahName) {
            currentSurah = surahName;
            currentVerse = 0;
            
            // Обновляем активную кнопку суры
            document.querySelectorAll('.surah-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === surahName) {
                    btn.classList.add('active');
                }
            });
            
            const surah = juzAmma[surahName];
            const verseDisplay = document.getElementById('verse-display');
            
            if (surah) {
                verseDisplay.innerHTML = `
                    <div class="verse-arabic">${surah.verses[0]}</div>
                    <div class="verse-translation">${surah.translations[0]}</div>
                    <div class="reciters">
                        ${Object.keys(surah.audio).map(reciter => `
                            <button class="reciter-btn ${reciter === currentReciter ? 'active' : ''}" 
                                    onclick="setReciter('${reciter}')">
                                ${reciter}
                            </button>
                        `).join('')}
                    </div>
                    <div class="verse-controls">
                        <button class="btn" onclick="playCurrentVerse()">
                            <i class="fas fa-play"></i> Прослушать
                        </button>
                        <button class="btn" onclick="addToBookmarks()">
                            <i class="fas fa-bookmark"></i> В закладки
                        </button>
                        <button class="btn btn-success" onclick="markAsLearned()">
                            <i class="fas fa-check-circle"></i> Выучено
                        </button>
                        <button class="btn btn-info" onclick="nextVerse()">
                            <i class="fas fa-arrow-right"></i> Следующий аят
                        </button>
                    </div>
                `;
            }
        }

        // Установка чтеца
        function setReciter(reciter) {
            currentReciter = reciter;
            document.querySelectorAll('.reciter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === reciter) {
                    btn.classList.add('active');
                }
            });
        }

        // Воспроизведение текущего аята
        function playCurrentVerse() {
            const surah = juzAmma[currentSurah];
            const audioUrl = surah.audio[currentReciter];
            
            // В реальном приложении здесь будет код для воспроизведения аудио
            // Для демонстрации просто показываем сообщение
            alert(`Воспроизведение аята ${currentVerse + 1} суры ${currentSurah} в исполнении ${currentReciter}\nАудио: ${audioUrl}`);
            
            // Можно использовать HTML5 Audio API:
            // const audio = new Audio(audioUrl);
            // audio.play();
        }

        // Следующий аят
        function nextVerse() {
            const surah = juzAmma[currentSurah];
            currentVerse = (currentVerse + 1) % surah.verses.length;
            loadSurah(currentSurah);
        }

        // Добавление в закладки
        function addToBookmarks() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || [];
            
            // Проверяем, нет ли уже этой закладки
            const existing = bookmarks.find(b => b.surah === currentSurah && b.verse === currentVerse);
            
            if (!existing) {
                bookmarks.push({ 
                    surah: currentSurah, 
                    verse: currentVerse,
                    date: new Date().toISOString()
                });
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                alert(`Аят ${currentVerse + 1} суры ${currentSurah} добавлен в закладки`);
                loadBookmarks();
            } else {
                alert("Этот аят уже в ваших закладках");
            }
        }

        // Отметка как выученного
        function markAsLearned() {
            const progress = JSON.parse(localStorage.getItem('progress')) || {};
            
            if (!progress[currentSurah]) {
                progress[currentSurah] = [];
            }
            
            if (!progress[currentSurah].includes(currentVerse)) {
                progress[currentSurah].push(currentVerse);
                localStorage.setItem('progress', JSON.stringify(progress));
                alert(`Аят ${currentVerse + 1} суры ${currentSurah} отмечен как выученный`);
                loadProgress();
            } else {
                alert("Этот аят уже отмечен как выученный");
            }
        }

        // Загрузка прогресса
        function loadProgress() {
            const progress = JSON.parse(localStorage.getItem('progress')) || {};
            const progressContainer = document.getElementById('progress-container');
            
            let html = '';
            let totalLearned = 0;
            let totalVerses = 0;
            
            // Прогресс по сурам
            for (const surahName in juzAmma) {
                const surah = juzAmma[surahName];
                const learnedVerses = progress[surahName] || [];
                const percent = Math.round((learnedVerses.length / surah.verses.length) * 100);
                
                totalLearned += learnedVerses.length;
                totalVerses += surah.verses.length;
                
                html += `
                    <div class="surah-progress">
                        <h3>${surahName} (${learnedVerses.length}/${surah.verses.length})</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${percent}%"></div>
                        </div>
                    </div>
                `;
            }
            
            // Общий прогресс
            const totalPercent = Math.round((totalLearned / totalVerses) * 100);
            html = `
                <div class="surah-progress">
                    <h3>Общий прогресс (${totalLearned}/${totalVerses})</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${totalPercent}%"></div>
                    </div>
                </div>
                ${html}
            `;
            
            progressContainer.innerHTML = html;
        }

        // Загрузка закладок
        function loadBookmarks() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            const bookmarksContainer = document.getElementById('bookmarks-container');
            
            if (bookmarks.length === 0) {
                bookmarksContainer.innerHTML = '<div class="empty-message">У вас пока нет закладок</div>';
                return;
            }
            
            let html = '';
            
            bookmarks.forEach((bookmark, index) => {
                const surah = juzAmma[bookmark.surah];
                if (surah) {
                    html += `
                        <div class="bookmark-item">
                            <h3>${bookmark.surah}, аят ${bookmark.verse + 1}</h3>
                            <div class="verse-arabic">${surah.verses[bookmark.verse]}</div>
                            <div class="verse-translation">${surah.translations[bookmark.verse]}</div>
                            <div class="verse-controls">
                                <button class="btn btn-info" onclick="goToBookmark('${bookmark.surah}', ${bookmark.verse})">
                                    <i class="fas fa-eye"></i> Перейти
                                </button>
                                <button class="btn btn-danger" onclick="removeBookmark(${index})">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    `;
                }
            });
            
            bookmarksContainer.innerHTML = html;
        }

        // Переход к закладке
        function goToBookmark(surahName, verseIndex) {
            currentSurah = surahName;
            currentVerse = verseIndex;
            loadSurah(currentSurah);
            openTab('learn');
        }

        // Удаление закладки
        function removeBookmark(index) {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            bookmarks.splice(index, 1);
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            loadBookmarks();
        }

        // Начало теста
        function startTest() {
            // Создаем вопросы для теста
            testQuestions = generateTestQuestions();
            currentTestQuestion = 0;
            testScore = 0;
            
            showTestQuestion();
            
            document.getElementById('start-test-btn').style.display = 'none';
            document.getElementById('next-test-btn').style.display = 'none';
            document.getElementById('test-result').style.display = 'none';
        }

        // Генерация вопросов для теста
        function generateTestQuestions() {
            const questions = [];
            const progress = JSON.parse(localStorage.getItem('progress')) || {};
            
            // Собираем все выученные аяты
            const learnedVerses = [];
            for (const surahName in progress) {
                if (juzAmma[surahName]) {
                    progress[surahName].forEach(verse => {
                        learnedVerses.push({
                            surah: surahName,
                            verse: verse,
                            text: juzAmma[surahName].verses[verse],
                            translation: juzAmma[surahName].translations[verse]
                        });
                    });
                }
            }
            
            // Если выученных аятов мало, добавляем случайные
            if (learnedVerses.length < 10) {
                for (const surahName in juzAmma) {
                    const surah = juzAmma[surahName];
                    for (let i = 0; i < surah.verses.length; i++) {
                        if (!progress[surahName] || !progress[surahName].includes(i)) {
                            learnedVerses.push({
                                surah: surahName,
                                verse: i,
                                text: surah.verses[i],
                                translation: surah.translations[i]
                            });
                        }
                    }
                }
            }
            
            // Создаем вопросы
            for (let i = 0; i < Math.min(10, learnedVerses.length); i++) {
                const randomIndex = Math.floor(Math.random() * learnedVerses.length);
                const verse = learnedVerses[randomIndex];
                
                // Удаляем выбранный аят, чтобы не повторяться
                learnedVerses.splice(randomIndex, 1);
                
                // Создаем варианты ответов
                const options = [verse.translation];
                while (options.length < 4) {
                    const randomVerse = learnedVerses[Math.floor(Math.random() * learnedVerses.length)];
                    if (!options.includes(randomVerse.translation)) {
                        options.push(randomVerse.translation);
                    }
                }
                
                // Перемешиваем варианты
                options.sort(() => Math.random() - 0.5);
                
                questions.push({
                    verse: verse.text,
                    correctAnswer: verse.translation,
                    options: options
                });
            }
            
            return questions;
        }

        // Показ вопроса теста
        function showTestQuestion() {
            if (currentTestQuestion >= testQuestions.length) {
                // Тест завершен
                const result = Math.round((testScore / testQuestions.length) * 100);
                document.getElementById('test-result').textContent = `Тест завершен! Ваш результат: ${result}%`;
                document.getElementById('test-result').style.display = 'block';
                document.getElementById('start-test-btn').style.display = 'block';
                document.getElementById('start-test-btn').textContent = 'Начать новый тест';
                document.getElementById('next-test-btn').style.display = 'none';
                document.getElementById('test-question').textContent = '';
                document.getElementById('test-options').innerHTML = '';
                return;
            }
            
            const question = testQuestions[currentTestQuestion];
            document.getElementById('test-question').textContent = question.verse;
            
            let optionsHtml = '';
            question.options.forEach((option, index) => {
                optionsHtml += `
                    <div class="test-option" onclick="selectTestOption(${index})">
                        ${option}
                    </div>
                `;
            });
            
            document.getElementById('test-options').innerHTML = optionsHtml;
        }

        // Выбор варианта ответа
        function selectTestOption(index) {
            const question = testQuestions[currentTestQuestion];
            const options = document.querySelectorAll('.test-option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected');
                if (question.options[i] === question.correctAnswer) {
                    option.classList.add('correct');
                } else if (i === index) {
                    option.classList.add('incorrect');
                }
                
                // Отключаем дальнейшие клики
                option.style.pointerEvents = 'none';
            });
            
            // Проверяем ответ
            if (question.options[index] === question.correctAnswer) {
                testScore++;
            }
            
            // Показываем кнопку "Далее"
            document.getElementById('next-test-btn').style.display = 'block';
        }

        // Следующий вопрос теста
        function nextTestQuestion() {
            currentTestQuestion++;
            showTestQuestion();
            document.getElementById('next-test-btn').style.display = 'none';
        }

        // Переключение вкладок
        function openTab(tabName) {
            // Скрываем все вкладки
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Деактивируем все кнопки
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Активируем выбранную вкладку и кнопку
            document.getElementById(`${tabName}-tab`).classList.add('active');
            document.querySelector(`.tab-btn[onclick="openTab('${tabName}')"]`).classList.add('active');
            
            // Обновляем данные при открытии некоторых вкладок
            if (tabName === 'progress') {
                loadProgress();
            } else if (tabName === 'bookmarks') {
                loadBookmarks();
            }
        }

        // Проверка PWA-возможностей
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(registration => {
                    console.log('ServiceWorker registration successful');
                }).catch(err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
